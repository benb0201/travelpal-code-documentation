\doxysection{Itinerary\+Service.\+java}
\hypertarget{_itinerary_service_8java_source}{}\label{_itinerary_service_8java_source}\index{ItineraryService.java@{ItineraryService.java}}
\mbox{\hyperlink{_itinerary_service_8java}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00001}00001\ \textcolor{keyword}{package\ }com.example.travelpal.service;}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00003}00003\ \textcolor{keyword}{import}\ com.example.travelpal.models.Activity;}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00004}00004\ \textcolor{keyword}{import}\ com.example.travelpal.models.Itinerary;}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00005}00005\ \textcolor{keyword}{import}\ com.example.travelpal.repository.ItineraryRepository;}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00006}00006\ \textcolor{keyword}{import}\ jakarta.persistence.EntityNotFoundException;}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00007}00007\ \textcolor{keyword}{import}\ org.springframework.beans.factory.annotation.Autowired;}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00008}00008\ \textcolor{keyword}{import}\ org.springframework.stereotype.Service;}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00009}00009\ \textcolor{keyword}{import}\ org.springframework.transaction.annotation.Transactional;}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00011}00011\ \textcolor{keyword}{import}\ java.util.List;}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00012}00012\ \textcolor{keyword}{import}\ java.util.Optional;}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00014}00014\ @Service}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00015}\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service}{00015}}\ \textcolor{keyword}{public}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service}{ItineraryService}}\ \{}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00016}\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_a0644050aa0dab57dfc5aa5be86bb0dc7}{00016}}\ \ \ \ \ \textcolor{keyword}{private}\ \mbox{\hyperlink{interfacecom_1_1example_1_1travelpal_1_1repository_1_1_itinerary_repository}{ItineraryRepository}}\ \mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_a0644050aa0dab57dfc5aa5be86bb0dc7}{itineraryRepository}};}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00018}00018\ \ \ \ \ @Autowired}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00019}\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_a766f11f959ded4a3a44f972dbc915975}{00019}}\ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_a766f11f959ded4a3a44f972dbc915975}{ItineraryService}}(\mbox{\hyperlink{interfacecom_1_1example_1_1travelpal_1_1repository_1_1_itinerary_repository}{ItineraryRepository}}\ \mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_a0644050aa0dab57dfc5aa5be86bb0dc7}{itineraryRepository}})\ \{}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00020}00020\ \ \ \ \ \ \ \ \ this.itineraryRepository\ =\ \mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_a0644050aa0dab57dfc5aa5be86bb0dc7}{itineraryRepository}};}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00021}00021\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00022}00022\ }
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00023}00023\ \ \ \ \ \textcolor{comment}{//\ Adding\ method\ to\ retrieve\ itineraries\ by\ the\ client\ ID}}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00024}\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_a10d972bbd063bb1b23afbaaefcb86baa}{00024}}\ \ \ \ \ \textcolor{keyword}{public}\ List<Itinerary>\ \mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_a10d972bbd063bb1b23afbaaefcb86baa}{getItinerariesByClientId}}(Long\ clientId)\ \{}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00025}00025\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_a0644050aa0dab57dfc5aa5be86bb0dc7}{itineraryRepository}}.\mbox{\hyperlink{interfacecom_1_1example_1_1travelpal_1_1repository_1_1_itinerary_repository_a0a96a1ed8544b805de2ff566e084eca2}{findByClientId}}(clientId);}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00026}00026\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00027}\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_a79ce23e7bc8e44fadf216131c578131d}{00027}}\ \ \ \ \ \textcolor{keyword}{public}\ List<Itinerary>\ \mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_a79ce23e7bc8e44fadf216131c578131d}{getItineraries}}()\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_a0644050aa0dab57dfc5aa5be86bb0dc7}{itineraryRepository}}.findAll();\ \}}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00028}00028\ }
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00029}\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_a4dfa5bccb8f0f1f7e3b5fa0364505816}{00029}}\ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary}{Itinerary}}\ \mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_a4dfa5bccb8f0f1f7e3b5fa0364505816}{getItineraryById}}(Long\ itineraryId)\ \{}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00030}00030\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_a0644050aa0dab57dfc5aa5be86bb0dc7}{itineraryRepository}}.findById(itineraryId)}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00031}00031\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .orElseThrow(()\ -\/>\ \textcolor{keyword}{new}\ EntityNotFoundException(\textcolor{stringliteral}{"{}Itinerary\ with\ ID\ "{}}\ +\ itineraryId\ +\ \textcolor{stringliteral}{"{}\ not\ found"{}}));}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00032}00032\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00034}\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_aebb1dfb4b1b8774d708ff66a6f1e1dff}{00034}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_aebb1dfb4b1b8774d708ff66a6f1e1dff}{addNewItinerary}}(\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary}{Itinerary}}\ itinerary)\ \{}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00035}00035\ \ \ \ \ \ \ \ \ itinerary.\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary_a3fed9897858b5a54b95607b5c5f14755}{calculateEstimatedCost}}();\ \textcolor{comment}{//\ Calculate\ the\ estimated\ cost\ before\ saving}}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00036}00036\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_a0644050aa0dab57dfc5aa5be86bb0dc7}{itineraryRepository}}.save(itinerary);}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00037}00037\ \ \ \ \ \ \ \ \ System.out.println(itinerary);}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00038}00038\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00039}00039\ }
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00040}\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_abe8c03bdada36b41d5d3cfe9daaeae81}{00040}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_abe8c03bdada36b41d5d3cfe9daaeae81}{deleteItinerary}}(Long\ itineraryId)\ \{}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00041}00041\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{boolean}\ exists\ =\ \mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_a0644050aa0dab57dfc5aa5be86bb0dc7}{itineraryRepository}}.existsById(itineraryId);}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00042}00042\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(!exists)\{}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00043}00043\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \textcolor{keyword}{new}\ IllegalStateException(\textcolor{stringliteral}{"{}Itinerary\ with\ id:\ "{}}+itineraryId+\textcolor{stringliteral}{"{}\ does\ not\ exist"{}});}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00044}00044\ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{else}\ \mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_a0644050aa0dab57dfc5aa5be86bb0dc7}{itineraryRepository}}.deleteById(itineraryId);}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00045}00045\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00046}00046\ }
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00047}00047\ \ \ \ \ \ \ \ \ @Transactional}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00048}\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_a337611afa303699ae7bf8ac9acf7e33e}{00048}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_a337611afa303699ae7bf8ac9acf7e33e}{updateItinerary}}(\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary}{Itinerary}}\ updatedItinerary,\ Long\ itineraryId)\ \{}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00049}00049\ \ \ \ \ \ \ \ \ Optional<Itinerary>\ itineraryOptional\ =\ \mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1service_1_1_itinerary_service_a0644050aa0dab57dfc5aa5be86bb0dc7}{itineraryRepository}}.findById(itineraryId);}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00050}00050\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (itineraryOptional.isEmpty())\ \{}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00051}00051\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \textcolor{keyword}{new}\ EntityNotFoundException(\textcolor{stringliteral}{"{}Itinerary\ with\ ID\ "{}}\ +\ itineraryId\ +\ \textcolor{stringliteral}{"{}\ not\ found"{}});}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00052}00052\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00053}00053\ }
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00054}00054\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ the\ existing\ itinerary\ from\ the\ Optional}}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00055}00055\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary}{Itinerary}}\ existingItinerary\ =\ itineraryOptional.get();}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00056}00056\ }
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00057}00057\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Update\ the\ attributes\ of\ the\ existing\ itinerary\ with\ the\ values\ from\ the\ new\ itinerary}}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00058}00058\ \ \ \ \ \ \ \ \ existingItinerary.\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary_a90dd91d7ad2c1c1e63937906c2ec46a0}{setName}}(updatedItinerary.\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary_a65bdb5592dd2ac334ab45a35af25bf52}{getName}}());}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00059}00059\ \ \ \ \ \ \ \ \ existingItinerary.\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary_a6ae1ba7525bfc4d5f9338e34d6dd90e8}{setDescription}}(updatedItinerary.\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary_af2f0579383b9dd2a5de702b2f889aabd}{getDescription}}());}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00060}00060\ \ \ \ \ \ \ \ \ existingItinerary.\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary_a8e68b0fc9cfb5f143464177a7c14f679}{setStartDate}}(updatedItinerary.\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary_af1fc349529d7670f1e78d9bb99d8e1f7}{getStartDate}}());}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00061}00061\ \ \ \ \ \ \ \ \ existingItinerary.\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary_a64ddc8289e409c30b6a4aeabb5977ea2}{setEndDate}}(updatedItinerary.\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary_a57a3573c8c9752f82bc9e63464b0edb1}{getEndDate}}());}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00062}00062\ \ \ \ \ \ \ \ \ existingItinerary.\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary_a111917d34afbcd7f6bea6e3a8cbc0548}{setLocation}}(updatedItinerary.\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary_a17dff475b68de06c8d9337801968d752}{getLocation}}());}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00063}00063\ \ \ \ \ \ \ \ \ existingItinerary.\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary_a8b83a71e39763b18a71f32738a72184d}{setNotes}}(updatedItinerary.\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary_ad926bd006fbb4bbbd0e7c5f36067d251}{getNotes}}());}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00064}00064\ \ \ \ \ \ \ \ \ existingItinerary.\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary_ace9a85b7f2b4a6e1a9eb0e37a99f63eb}{setAccommodation}}(updatedItinerary.\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary_a76df0d26d6987cf498d6be37f15d33da}{getAccommodation}}());}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00065}00065\ \ \ \ \ \ \ \ \ existingItinerary.\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary_a2822fceefe1b2f9a6e5c5d9d26329d9a}{setAccommodationCost}}(updatedItinerary.\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary_a1133df79c819fa068f569e9e7e6d8206}{getAccommodationCost}}());}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00066}00066\ }
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00067}00067\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Update\ the\ activities}}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00068}00068\ \ \ \ \ \ \ \ \ existingItinerary.\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary_a83c126f1fb8bf918546647db5f3b514c}{getActivities}}().clear();\ \textcolor{comment}{//\ Clear\ the\ current\ list}}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00069}00069\ \ \ \ \ \ \ \ \ existingItinerary.\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary_a83c126f1fb8bf918546647db5f3b514c}{getActivities}}().addAll(updatedItinerary.\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary_a83c126f1fb8bf918546647db5f3b514c}{getActivities}}());}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00070}00070\ \ \ \ \ \ \ \ \ existingItinerary.\mbox{\hyperlink{classcom_1_1example_1_1travelpal_1_1models_1_1_itinerary_a3fed9897858b5a54b95607b5c5f14755}{calculateEstimatedCost}}();\ \textcolor{comment}{//\ Recalculate\ the\ estimated\ cost\ with\ the\ updates}}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00071}00071\ }
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00072}00072\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ No\ need\ to\ explicitly\ save\ the\ object\ due\ to\ the\ @Transactional\ annotation}}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00073}00073\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ The\ changes\ will\ be\ automatically\ persisted\ at\ the\ end\ of\ the\ transaction}}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00075}00075\ \textcolor{comment}{//\ \ \ \ \ \ \ \ itineraryRepository.save(existingItinerary);}}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00076}00076\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_itinerary_service_8java_source_l00077}00077\ \}}

\end{DoxyCode}
